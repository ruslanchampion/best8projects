(()=>{"use strict";var t={705:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=t(e);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,s){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(s)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(n[a]=!0)}for(var r=0;r<t.length;r++){var d=[].concat(t[r]);s&&n[d[0]]||(i&&(d[2]?d[2]="".concat(i," and ").concat(d[2]):d[2]=i),e.push(d))}},e}},318:(t,e,i)=>{const s=i(643);class n extends s{static from(t){return t instanceof s?t:new n(t)}constructor(t){super(),this._sourceLike=t}source(){return this._sourceLike.source()}buffer(){return"function"==typeof this._sourceLike.buffer?this._sourceLike.buffer():super.buffer()}size(){return"function"==typeof this._sourceLike.size?this._sourceLike.size():super.size()}map(t){return"function"==typeof this._sourceLike.map?this._sourceLike.map(t):super.map(t)}sourceAndMap(t){return"function"==typeof this._sourceLike.sourceAndMap?this._sourceLike.sourceAndMap(t):super.sourceAndMap(t)}updateHash(t){if("function"==typeof this._sourceLike.updateHash)return this._sourceLike.updateHash(t);if("function"==typeof this._sourceLike.map)throw new Error("A Source-like object with a 'map' method must also provide an 'updateHash' method");t.update(this.buffer())}}t.exports=n},643:t=>{t.exports=class{source(){throw new Error("Abstract")}buffer(){const t=this.source();return Buffer.isBuffer(t)?t:Buffer.from(t,"utf-8")}size(){return this.buffer().length}map(t){return null}sourceAndMap(t){return{source:this.source(),map:this.map(t)}}updateHash(t){throw new Error("Abstract")}}},431:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(705),n=i.n(s)()((function(t){return t[1]}));n.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap);"]),n.push([t.id,'*{box-sizing:border-box;margin:0}*:active,*:focus{outline:none}.block_screen{display:block;position:absolute;width:0;height:0;left:0;top:0;opacity:0;z-index:1;background:rgba(80,80,80,.5);transition:opacity .5s}.block_screen-active{width:100vw;height:100vh;opacity:1;transition:opacity .5s}.container{display:grid;grid-template-columns:min(93vw, 93vh) auto;align-items:center;justify-items:center;position:absolute;width:100vw;height:100vh;left:0;top:0;background-image:-moz-linear-gradient(-45deg, #645e5a 0%, #131011 100%);background-image:-webkit-linear-gradient(-45deg, #645e5a 0%, #131011 100%);background-image:linear-gradient(135deg, #645e5a 0%, #131011 100%);filter:progid:DXImageTransform.Microsoft.gradient( startColorstr="#645e5a", endColorstr="#131011",GradientType=1 )}body{overflow:hidden;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.board{display:grid;gap:1%;width:min(85vw, 85vh);height:min(85vw, 85vh);order:0;justify-self:right;border-radius:1%;padding:1%;border:7px solid #46464b;background:linear-gradient(90deg, #424246 0%, #1f1f20 46%, #3e3f40 100%);box-shadow:inset 5px 5px 5px 0px rgba(0,0,0,.5),inset -3px -3px 3px rgba(170,170,170,.5),10px 10px 15px rgba(0,0,0,.5)}.tile{display:flex;width:100%;height:100%;justify-content:center;align-items:center;color:#777;transition:all .5s;transform:translate(50px, 0);border-radius:1%;-webkit-border-radius:1%;-moz-border-radius:1%;-o-border-radius:1%;-ms-border-radius:1%;background-image:-o-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-moz-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-webkit-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-ms-linear-gradient(top, #dbdbd5, #a7a7a7);box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-webkit-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-moz-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-o-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-ms-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);overflow:hidden}.tile_text{font-size:2.1vw;font-weight:700;color:#fff;background-color:#dedede;color:transparent;text-shadow:0px 2px 3px rgba(50,50,50,.6);pointer-events:none;-webkit-background-clip:text;-moz-background-clip:text;background-clip:text;overflow:hidden}.modal__window{display:flex;flex-direction:column;position:absolute;justify-content:center;align-content:center;align-items:center;text-align:center;width:0;height:0;left:50%;top:50%;color:#fff;border-radius:7px;z-index:7000;background-color:rgba(10,10,10,.9);box-shadow:8px 8px 10px rgba(0,0,0,.5);opacity:0;transition:all .5s}.modal__window-active{width:65%;height:auto;left:50%;top:50%;opacity:1;transform:scale(1)}.modal__window-text{display:flex;flex-direction:column;justify-content:center;text-align:center;margin-top:5%;margin-bottom:5%}.modal__window-input{display:flex;width:90%;color:#fff;border:0;text-align:center;font-size:1.3vw;margin-top:5%;margin-bottom:5%;border-bottom:1px solid #fff;background-color:rgba(80,80,80,.2)}.modal__window-button{display:flex;width:35%;height:20%;justify-content:center;align-items:center;color:#fff;margin-top:5%;margin-bottom:5%;border:1px solid rgba(35,200,255,.8);background:transparent}.modal__window-button:hover{color:#fff;background-color:rgba(35,200,255,.8)}.dialog_box_buttons_bar{display:flex;justify-content:space-around;align-items:center;width:100%;height:15%;margin-top:5%}.info__block{display:grid;width:100%;height:100%;grid-template-columns:50% 50%;grid-template-rows:30% auto 30%;justify-items:center;align-items:center}.rating__list{display:flex;flex-direction:column;grid-column-start:1;grid-column-end:3;order:3;width:85%;height:auto;padding:1%;background-color:rgba(50,50,50,.7);box-shadow:8px 8px 10px rgba(15,15,15,.5)}.rating__list-button{display:flex;width:100%;color:#fff;border:0;text-transform:uppercase;margin-bottom:1%;justify-content:center;transform:scale(1);background-color:rgba(35,200,255,.8);transition:all .5s}.rating__list-button:hover{cursor:pointer;transform:scale(1);color:#000;background-color:rgba(235,235,255,.8)}.rating__list-button:active{transform:scale(0.9);color:#000;background-color:rgba(225,225,235,.8)}.rating__list-list{display:grid;width:100%;height:90%;grid-template-columns:auto auto auto auto auto;grid-template-rows:10fr 10fr 10fr 10fr 10fr 10fr 10fr 10fr 10fr 10fr;gap:1%;margin-bottom:2%}.rating_list_item{display:flex;justify-content:center;color:#fff;font-size:min(2vw, 2vh)}.rating_list_item:nth-child(10n),.rating_list_item:nth-child(10n-4),.rating_list_item:nth-child(10n-3),.rating_list_item:nth-child(10n-2),.rating_list_item:nth-child(10n-1){background-color:rgba(100,100,100,.5)}.rating_item_header{display:flex;justify-content:center;color:#000;background-color:rgba(250,250,250,.7)}.timer_box{display:flex;align-self:end;width:60%;order:1;border-radius:30px;align-items:center;justify-content:center;background-image:linear-gradient(-225deg, #92929b 0%, #0a0a0e 100%);box-shadow:8px 8px 10px rgba(0,0,0,.5)}.timer_box-inner{display:flex;flex-direction:column;width:98%;height:96%;margin:1%;padding-top:8%;align-items:center;border-radius:30px;background-image:linear-gradient(-225deg, #555559 0%, #111111 100%)}.time_box-inner-frame{display:flex;width:87%;height:60%;margin:1%;border-radius:10px;justify-content:center;align-items:center;background-color:#070707}.time_box-inner-frame-display{display:flex;justify-content:center;align-items:center;width:93%;height:80%;margin:1%;background-color:#1e1e25;-moz-box-shadow:inset 0 0 10px #000;-webkit-box-shadow:inset 0 0 10px #000;box-shadow:inset 0 0 10px #000}.timer_subs{display:flex;width:93%;margin:5%;font-weight:800;font-size:.7vw;font-family:sans-serif;color:#fff;justify-content:space-evenly}.timer_text{text-align:center;width:100%;font-size:min(5.5vw, 5.5vh);font-family:"Share Tech Mono",monospace;line-space:2%;color:#21c3ff;text-shadow:0px 0px 5px #09aae6}.menu__window{display:none;flex-direction:column;position:absolute;justify-content:center;align-content:center;align-items:center;text-align:center;width:23%;height:69%;left:50%;top:50%;color:#fff;border-radius:7px;z-index:7000;background-color:rgba(10,10,10,.9);box-shadow:8px 8px 10px rgba(0,0,0,.5);opacity:0;transform:translate(-50%, -50%);transition:all .5s}.menu__window-active{opacity:1;transform:ranslate(-50%, -50%) scale(1)}.switch{position:relative;display:inline-block;width:60px;height:34px}.switch input{opacity:0;width:0;height:0}.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:.4s;transition:.4s}.slider:before{position:absolute;content:"";height:26px;width:26px;left:4px;bottom:4px;background-color:#fff;-webkit-transition:.4s;transition:.4s}input:checked+.slider{background-color:#21c3ff}input:focus+.slider{box-shadow:0 0 1px #21c3ff}input:checked+.slider:before{-webkit-transform:translateX(26px);-ms-transform:translateX(26px);transform:translateX(26px)}.slider.round{border-radius:34px}.slider.round:before{border-radius:50%}.dropbtn{background-color:#21c3ff;color:#fff;width:100%;font-size:1.5vw;border:none;cursor:pointer;transition:all .5s}.dropdown{position:relative;display:inline-block}.dropdown-content{display:block;visibility:hidden;position:absolute;font-size:1.15vw;background-color:#f9f9f9;box-shadow:0px 8px 16px 0px #00000033;z-index:1;opacity:0;height:0;transition:all .5s}.dropdown-content span{color:#000;padding:12px 16px;text-decoration:none;display:block}.dropdown-content span:hover{background-color:rgba(33,195,255,.3)}.dropdown-content-active{display:block;opacity:1;height:auto;visibility:visible}.dropdown:hover .dropbtn{background-color:#16befa}.menu__title{font-family:sans-serif;font-size:2vw;font-weight:800;margin-bottom:7%}.menu__line{display:flex;align-items:center;justify-content:space-between;width:70%;margin:5%;font-size:1.5vw}.menu__buttons{display:flex;width:100%;height:7%;margin:2%;justify-content:space-evenly}.menu__window-button{display:flex;width:35%;height:100%;justify-content:center;align-items:center;color:#fff;margin-top:5%;margin-bottom:5%;border:1px solid rgba(35,200,255,.8);background:transparent}.menu__window-button:hover{color:#fff;background-color:rgba(35,200,255,.8)}.menu__window-button_rating{display:none;width:70%;height:8%;justify-content:center;align-items:center;color:#fff;margin-top:5%;margin-bottom:5%;border:1px solid rgba(35,200,255,.8);background:transparent}.menu__window-button_rating:hover{color:#fff;background-color:rgba(35,200,255,.8)}.control__panel{width:100%;height:auto;display:flex;grid-column-start:1;grid-column-end:3;order:4;justify-content:center;align-self:start;margin-top:5%}.start__button{width:130px;height:50px;text-transform:uppercase;border-top-left-radius:25px;border-bottom-left-radius:25px;padding-right:25px;border:-1;background-image:-o-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-moz-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-webkit-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-ms-linear-gradient(top, #dbdbd5, #a7a7a7);mask-image:radial-gradient(130px 50%, circle closest-corner, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 35px, black 36px, grey 37px);-webkit-mask-image:-webkit-radial-gradient(130px 50%, circle closest-corner, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 35px, black 36px, grey 37px);box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-webkit-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-moz-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-o-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-ms-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);text-shadow:#f6f6f5 1px 1px 2px,#9c9c8b -1px -1px 2px;box-shadow:8px 8px 10px rgba(15,15,15,.5);transition:all .2s}.menu__button{width:50px;height:50px;border:0;text-transform:uppercase;border-radius:25px;background-image:-o-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-moz-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-webkit-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-ms-linear-gradient(top, #dbdbd5, #a7a7a7);box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-webkit-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-moz-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-o-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-ms-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);text-shadow:#f6f6f5 1px 1px 2px,#9c9c8b -1px -1px 2px;box-shadow:8px 8px 10px rgba(15,15,15,.5);transition:all .2s}.solve__button{width:130px;height:50px;border:-1;text-transform:uppercase;border-top-right-radius:25px;border-bottom-right-radius:25px;padding-left:25px;background-image:-o-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-moz-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-webkit-linear-gradient(top, #dbdbd5, #a7a7a7);background-image:-ms-linear-gradient(top, #dbdbd5, #a7a7a7);mask-image:radial-gradient(0px 50%, circle closest-corner, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 35px, black 36px, grey 37px);-webkit-mask-image:-webkit-radial-gradient(0px 50%, circle closest-corner, rgba(0, 0, 0, 0) 0, rgba(0, 0, 0, 0) 35px, black 36px, grey 37px);box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-webkit-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-moz-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-o-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);-ms-box-shadow:inset 3px 3px 3px 0px rgba(255,255,255,.65),inset -3px -3px 3px rgba(0,0,0,.5),8px 8px 10px rgba(0,0,0,.5);text-shadow:#f6f6f5 1px 1px 2px,#9c9c8b -1px -1px 2px;box-shadow:8px 8px 10px rgba(15,15,15,.5);transition:all .2s}.start__button:hover,.menu__button:hover,.solve__button:hover{background-image:-o-linear-gradient(top, #dbdbd5, #20c2ff);background-image:-moz-linear-gradient(top, #dbdbd5, #20c2ff);background-image:-webkit-linear-gradient(top, #dbdbd5, #20c2ff);background-image:-ms-linear-gradient(top, #dbdbd5, #20c2ff);transform:scale(1.1)}.menu__button:hover{transform:scale(1.3)}.start__button:active,.menu__button:active,.solve__button:active{transform:scale(0.9)}.main_menu-button_disable:hover{background-image:-o-linear-gradient(top, #dbdbd5, #b7b7ab);background-image:-moz-linear-gradient(top, #dbdbd5, #b7b7ab);background-image:-webkit-linear-gradient(top, #dbdbd5, #b7b7ab);background-image:-ms-linear-gradient(top, #dbdbd5, #b7b7ab);transform:scale(1)}.move__counter{display:flex;flex-direction:column;align-self:end;width:auto;height:auto;order:2;padding-top:1%;padding-bottom:1%;padding-left:5%;padding-right:5%;border-radius:30px;align-items:center;justify-content:space-around;border:1px solid #f6f6ff;background-image:linear-gradient(-225deg, #555559 0%, #1b1b1b 100%);box-shadow:8px 8px 10px rgba(0,0,0,.5)}.move__counter-sup{display:flex;margin-top:5%;z-index:200;text-transform:uppercase;font-weight:800;font-size:1vw;font-family:sans-serif;color:#fff}.flip-steps{text-align:center;-webkit-perspective:200px;perspective:200px;margin:7% auto}.flip-steps__piece{display:inline-block;margin:0 1%}.card{display:block;position:relative;padding-bottom:.72em;font-size:min(5.5vw, 5.5vh);line-height:.95}.card__top,.card__bottom,.card__back::before,.card__back::after{display:block;height:.72em;color:#ccc;background:#222;padding-top:.23em;border-radius:.15em .15em 0 0;backface-visiblity:hidden;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;width:9vw;-webkit-transform:translateZ(0);transform:translateZ(0)}.card__bottom{color:#fff;position:absolute;top:50%;left:0;border-top:solid 1px #000;background:#393939;border-radius:0 0 .15em .15em;pointer-events:none;overflow:hidden}.card__bottom::after{display:block;margin-top:-0.72em}.card__back::before,.card__bottom::after{content:attr(data-value)}.card__back{position:absolute;height:100%;top:0;left:0%}.card__back::before{position:relative;z-index:-1;overflow:hidden}.flip .card__back::before{-webkit-animation:flipTop .3s cubic-bezier(0.37, 0.01, 0.94, 0.35);animation:flipTop .3s cubic-bezier(0.37, 0.01, 0.94, 0.35);-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-transform-origin:center bottom;transform-origin:center bottom}.flip .card__back .card__bottom{-webkit-transform-origin:center top;transform-origin:center top;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation:flipBottom .6s cubic-bezier(0.15, 0.45, 0.28, 1);animation:flipBottom .6s cubic-bezier(0.15, 0.45, 0.28, 1)}@-webkit-keyframes flipTop{0%{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);z-index:2}0%,99%{opacity:.99}100%{-webkit-transform:rotateX(-90deg);transform:rotateX(-90deg);opacity:0}}@keyframes flipTop{0%{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);z-index:2}0%,99%{opacity:.99}100%{-webkit-transform:rotateX(-90deg);transform:rotateX(-90deg);opacity:0}}@-webkit-keyframes flipBottom{0%,50%{z-index:-1;-webkit-transform:rotateX(90deg);transform:rotateX(90deg);opacity:0}51%{opacity:.99}100%{opacity:.99;-webkit-transform:rotateX(0deg);transform:rotateX(0deg);z-index:5}}@keyframes flipBottom{0%,50%{z-index:-1;-webkit-transform:rotateX(90deg);transform:rotateX(90deg);opacity:0}51%{opacity:.99}100%{opacity:.99;-webkit-transform:rotateX(0deg);transform:rotateX(0deg);z-index:5}}.disable_transition{-webkit-transition:none !important;-moz-transition:none !important;-o-transition:none !important;transition:none !important}@media screen and (aspect-ratio: 4/3){.container{grid-template-columns:min(80vw, 80vh) auto}.board{width:min(78vw, 78vh);height:min(78vw, 78vh)}.rating_list_item{font-size:min(1.5vw, 1.5vh)}.timer_text{font-size:min(2.75vw, 2.75vh)}.card{font-size:min(2.5vw, 2.5vh)}}@media screen and (max-width: 1081px)and (max-aspect-ratio: 3/4){.container{grid-template-columns:100%;grid-template-rows:auto min(88vw, 88vh) auto}.board{order:1;justify-self:center}.control__panel{order:5;grid-row-start:2;grid-row-end:4;align-self:center}.timer_box{order:0}.timer_text{font-size:min(4.5vw, 4.5vh)}.tile{box-shadow:inset 1px 1px 1px 0px rgba(255,255,255,.65),inset -1px -1px 1px rgba(0,0,0,.5),2px 2px 3px rgba(0,0,0,.5);-webkit-box-shadow:inset 1px 1px 1px 0px rgba(255,255,255,.65),inset -1px -1px 1px rgba(0,0,0,.5),2px 2px 3px rgba(0,0,0,.5);-moz-box-shadow:inset 1px 1px 1px 0px rgba(255,255,255,.65),inset -1px -1px 1px rgba(0,0,0,.5),2px 2px 3px rgba(0,0,0,.5);-o-box-shadow:inset 1px 1px 1px 0px rgba(255,255,255,.65),inset -1px -1px 1px rgba(0,0,0,.5),2px 2px 3px rgba(0,0,0,.5);-ms-box-shadow:inset 1px 1px 1px 0px rgba(255,255,255,.65),inset -1px -1px 1px rgba(0,0,0,.5),2px 2px 3px rgba(0,0,0,.5)}.rating__list{display:none}.menu__window{width:75%;height:80%}.menu__title{font-size:5vw}.menu__window-button_rating{display:flex;font-size:4.5vw}.menu__line{font-size:3.7vw}.dropdown-content{font-size:3vw}.dropbtn{font-size:3.7vw}.rating__list{display:none;position:absolute;left:50%;top:50%;z-index:7000;opacity:0;width:95%;height:auto;transform:translate(-50%, -50%)}.rating__list-active{display:flex;opacity:1}.card{font-size:min(3.5vw, 3.5vh)}}',""]);const o=n},379:(t,e,i)=>{var s,n=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),o=[];function a(t){for(var e=-1,i=0;i<o.length;i++)if(o[i].identifier===t){e=i;break}return e}function r(t,e){for(var i={},s=[],n=0;n<t.length;n++){var r=t[n],d=e.base?r[0]+e.base:r[0],l=i[d]||0,h="".concat(d," ").concat(l);i[d]=l+1;var c=a(h),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==c?(o[c].references++,o[c].updater(p)):o.push({identifier:h,updater:m(p,e),references:1}),s.push(h)}return s}function d(t){var e=document.createElement("style"),s=t.attributes||{};if(void 0===s.nonce){var o=i.nc;o&&(s.nonce=o)}if(Object.keys(s).forEach((function(t){e.setAttribute(t,s[t])})),"function"==typeof t.insert)t.insert(e);else{var a=n(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,h=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function c(t,e,i,s){var n=i?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(t.styleSheet)t.styleSheet.cssText=h(e,n);else{var o=document.createTextNode(n),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function p(t,e,i){var s=i.css,n=i.media,o=i.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}var _=null,u=0;function m(t,e){var i,s,n;if(e.singleton){var o=u++;i=_||(_=d(e)),s=c.bind(null,i,o,!1),n=c.bind(null,i,o,!0)}else i=d(e),s=p.bind(null,i,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s));var i=r(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var s=0;s<i.length;s++){var n=a(i[s]);o[n].references--}for(var d=r(t,e),l=0;l<i.length;l++){var h=a(i[l]);0===o[h].references&&(o[h].updater(),o.splice(h,1))}i=d}}}}},e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={id:s,exports:{}};return t[s](n,n.exports,i),n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{i(318);var t=i(379),e=i.n(t),s=i(431);e()(s.Z,{insert:"head",singleton:!1}),s.Z.locals;class n{static parentInvalid(t){console.error(`It's a control error.\nParent for ${t} was invalid.`)}static localStorageNotFound(t){console.error(`It's a control error.\n${t} doesn't found in the local storage.`)}static localStorageSupport(){console.error("It's a control error.\nThe browser doesn't support a local storage.")}static loadRating(){console.error("It's a control error.\nThe server doesn't response.")}}class o{static async loadRating(t,e){const i="https://gem-puzzle-server.herokuapp.com/rating/list?s="+t;let s=null;try{s=await(await fetch(i)).json()}catch(t){n.loadRating()}e([...s].sort(((t,e)=>t.time-e.time)).slice(0,10),[...s].sort(((t,e)=>t.steps-e.steps)).slice(0,10))}static async postRecord(t,e,i,s,n=(()=>{})){const o=await fetch("https://gem-puzzle-server.herokuapp.com/rating/new",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,size:e,time:i,steps:s})});n(await o.json())}}class a{static getTimeFormat(t){return{hrs:String(~~(t/36e5)).padStart(2,"0"),mins:String(~~(t/6e4)%60).padStart(2,"0"),secs:String(~~(t/1e3)%60).padStart(2,"0")}}static getTimeFormatStr(t){const e=a.getTimeFormat(t);return`${e.hrs}:${e.mins}:${e.secs}`}}class r{constructor(t){this._size=t,this._name="",this._time=0,this._moves=0,this._isByTime=!0,this._HTML=document.createElement("div"),this._HTML.classList.add("rating__list"),this._Button=document.createElement("button"),this._Button.classList.add("rating__list-button"),this._Button.textContent="time rating",this._List=document.createElement("div"),this._List.classList.add("rating__list-list"),this._HTML.appendChild(this._Button),this._HTML.appendChild(this._List),this._Button.addEventListener("click",(()=>{this._isByTime=!this._isByTime,this._Button.textContent=this._isByTime?"time rating":"moves rating",this.loadRating()})),this.loadRating()}appendTo(t){t.appendChild(this._HTML)}isBestTime(t){const e=this._movesRating;return!!(e.filter((e=>e.time>t)).length>0||e.length<10)}isBestMoves(t){const e=this._movesRating;return!!(e.filter((e=>e.steps>t)).length>0||e.length<10)}setSize(t){this._size=t}loadRating(){const t=`${this._size}x${this._size}`;o.loadRating(t,this.setRatingTables.bind(this))}setRatingTables(t,e){this._timeRating=t,this._movesRating=e;const i=this._isByTime?this._timeRating:this._movesRating;this.updateTable(i)}updateTable(t){this._List.innerHTML='<div class="rating_list_item rating_item_header">Name</div>',this._List.innerHTML+='<div class="rating_list_item rating_item_header">Size</div>',this._List.innerHTML+='<div class="rating_list_item rating_item_header">Moves</div>',this._List.innerHTML+='<div class="rating_list_item rating_item_header">Time</div>',this._List.innerHTML+='<div class="rating_list_item rating_item_header">Date</div>';const e=t.length>10?10:t.length;for(let i=0;i<e;i++){const e=new Date(t[i].date),s=`${e.toLocaleTimeString()} ${e.toLocaleDateString()}`,n=a.getTimeFormatStr(t[i].time);this._List.innerHTML+=`<div class="rating_list_item">${t[i].name}</div>`,this._List.innerHTML+=`<div class="rating_list_item">${t[i].size}</div>`,this._List.innerHTML+=`<div class="rating_list_item">${t[i].steps}</div>`,this._List.innerHTML+=`<div class="rating_list_item">${n}</div>`,this._List.innerHTML+=`<div class="rating_list_item">${s}</div>`}}}class d{constructor(){this._HTML=document.createElement("div"),this._HTML.classList.add("modal__window"),this._Text=document.createElement("p"),this._Text.classList.add("modal__window-text"),this._Input=document.createElement("input"),this._Input.classList.add("modal__window-input"),this._Button=document.createElement("button"),this._Button.classList.add("modal__window-button"),this._Button.textContent="OK",this._Button.addEventListener("click",(()=>{""!==this._Input.value?(this.hide(),this.setHasInput(!1),this._callback(this._Input.value),this._Input.value=""):this.hide()})),this._HTML.appendChild(this._Text)}appendTo(t){t.appendChild(this._HTML)}setWidth(t){this._width=t,this._HTML.style.width=t+"%",this.centering()}setHeight(t){this._height=t,this._HTML.style.height=t+"%",this.centering()}setText(t){this._Text.innerHTML=t}setHasButton(t){const e=document.querySelector(".modal__window-button");t&&null===e&&this._HTML.appendChild(this._Button),t||null===e||this._HTML.removeChild(this._Button)}setHasInput(t){const e=document.querySelector(".modal__window-input");t&&null===e&&this._HTML.appendChild(this._Input),t||null===e||this._HTML.removeChild(this._Input)}setCancelable(t){if(t){const t=document.createElement("div");t.classList.add("dialog_box_buttons_bar");const e=document.createElement("button");e.classList.add("menu__window-button"),e.textContent="YES";const i=document.createElement("button");i.classList.add("menu__window-button"),i.textContent="NO",t.append(i,e),this._HTML.appendChild(t),e.addEventListener("click",(()=>{this.setCancelable(!1),this.hide(),this._callback(!0)})),i.addEventListener("click",(()=>{this.setCancelable(!1),this.hide(),this._callback(!1)}))}else{const t=this._HTML.querySelector(".dialog_box_buttons_bar");this._HTML.removeChild(t)}}setCallback(t){this._callback=t}show(){this._HTML.style.visibility="visible",setTimeout((()=>{this._HTML.classList.add("modal__window-active")}),300)}hide(){this._HTML.classList.remove("modal__window-active"),setTimeout((()=>{this._HTML.style.visibility="hidden"}),500)}centering(){this._HTML.style.transform="translate(-50%, -50%)"}}class l{constructor(){this._HTML=document.createElement("div"),this._HTML.classList.add("timer_box"),this._HTML.innerHTML='<div class="timer_box-inner">\n                                 <div class="time_box-inner-frame">\n                                   <div class="time_box-inner-frame-display">\n                                     <p class="timer_text">00:00:00</p>\n                                   </div>\n                                 </div>\n                                 <p class="timer_subs">\n                                   <span>HRS&nbsp;</span>\n                                   <span>MINS</span>\n                                   <span>SECS</span>\n                                 </p>\n                               </div>',this._Text=this._HTML.querySelector(".timer_text")}startTimer(){this._startTime=new Date,this._isStart=!0,this.updateTimer()}updateTimer(){this._time=new Date-this._startTime,this.setTime(this._time),setTimeout((()=>{this._isStart&&this.updateTimer()}),1e3)}resumeTimer(){this._startTime=new Date-this._time,this._isStart=!0,this.updateTimer()}stopTimer(){this._isStart=!1}getTime(){return this._time}appendTo(t){t.appendChild(this._HTML)}setTime(t){this._Text.textContent=a.getTimeFormatStr(t)}setStartTime(t){this._time=t,this.resumeTimer()}}class h{constructor(){this._HTML=document.createElement("div"),this._HTML.classList.add("move__counter"),this._HTML.innerHTML='<p class="move__counter-sup">moves</p>\n                                <div class="flip-steps">\n                                  <span class="flip-steps__piece">\n                                    <b class="flip-steps__card card">\n                                      <b class="card__top"></b>\n                                      <b class="card__bottom"></b>\n                                      <b class="card__back">\n                                        <b class="card__bottom"></b>\n                                      </b>\n                                    </b>\n                                  </span>\n                                </div>',this._flip=this._HTML.querySelector(".flip-steps__piece"),this._topCard=this._HTML.querySelector(".card__top"),this._bottomCard=this._HTML.querySelector(".card__bottom"),this._backCard=this._HTML.querySelector(".card__back"),this._backBottomCard=this._HTML.querySelector(".card__back .card__bottom"),this._moves=0,this.setText(this._moves)}appendTo(t){t.appendChild(this._HTML)}addMove(){this._moves+=1,this.setText(this._moves)}setMoves(t){this._moves=t,this.setText(t)}reset(){this._moves=0,this.setText(this._moves)}getMoves(){return this._moves}setText(t){t!==this._currentValue&&(this._currentValue>=0&&(this._backCard.setAttribute("data-value",this._currentValue),this._bottomCard.setAttribute("data-value",this._currentValue)),this._currentValue=t,this._topCard.innerText=this._currentValue,this._backBottomCard.setAttribute("data-value",this._currentValue),this._flip.classList.remove("flip"),(()=>{this._flip.offsetWidth})(),this._flip.classList.add("flip"))}}class c{constructor(t){this._isSound=!0,this._isMusic=!0,this._isRating=!1,this._isNumbers=!0,this._size="4x4",this._calback=t,this._blockScreen=document.createElement("div"),this._blockScreen.classList.add("block_screen"),this._HTML=document.createElement("div"),this._HTML.classList.add("menu__window"),this._HTML.innerHTML='\n              <p class="menu__title">MENU</p>   \n              <div class="menu__line">\n                <p>SIZE</p>\n                <div class="dropdown">\n                  <button class="dropbtn">4x4</button>\n                  <div class="dropdown-content">\n                    <span class="game-size">3x3</span>\n                    <span class="game-size">4x4</span>\n                    <span class="game-size" href="">5x5</span>\n                    <span class="game-size" href="">6x6</span>\n                    <span class="game-size" href="">7x7</span>\n                    <span class="game-size" href="">8x8</span>\n                  </div>\n                </div>\n              </div>\n              <div class="menu__line">\n                <p>SOUND</p>\n                <label class="switch">\n                  <input id="sound_menu" type="checkbox" checked>\n                  <span class="slider round"></span>\n                </label>\n              </div>\n              <div class="menu__line">\n                <p>MUSIC</p>\n                <label class="switch">\n                  <input id="music_menu" type="checkbox" checked>\n                  <span class="slider round"></span>\n                </label>\n              </div>\n              <div class="menu__line">\n                <p>NUMBERS</p>\n                <label class="switch">\n                  <input id="nums_menu" type="checkbox" checked>\n                  <span class="slider round"></span>\n                </label>\n              </div>\n              <button id="menu-rating" class="menu__window-button_rating">RATING TABLE</button> \n              <div class="menu__buttons">  \n                <button id="menu-cancel" class="menu__window-button">CANCEL</button>\n                <button id="menu-ok" class="menu__window-button">OK</button>                \n              </div>',this._dropdownContent=this._HTML.querySelector(".dropdown-content"),this._numsCheckBox=this._HTML.querySelector("#nums_menu"),this._musicCheckBox=this._HTML.querySelector("#music_menu"),this._soundCheckBox=this._HTML.querySelector("#sound_menu"),this._sizeButton=this._HTML.querySelector(".dropbtn"),this.ratingList=document.querySelector(".rating__list"),document.body.appendChild(this._blockScreen),this._HTML.addEventListener("click",(t=>{t.target.classList.contains("dropbtn")?this.dropdownListTogle():(this._isSizeButtonOn=!1,this._dropdownContent.classList.remove("dropdown-content-active"),this._isRating&&this.ratingList.classList.remove("rating__list-active")),t.target.classList.contains("game-size")&&(this._sizeButton.textContent=t.target.textContent,this._selectedSize=Number(t.target.textContent[0])),"menu-rating"===t.target.id&&(null===this.ratingList&&(this.ratingList=document.querySelector(".rating__list")),this._isRating=!this._isRating,this._isRating?this.ratingList.classList.add("rating__list-active"):this.ratingList.classList.remove("rating__list-active")),"menu-cancel"===t.target.id&&(this.hide(),this._calback(0)),"menu-ok"===t.target.id&&(this._size=this._sizeButton.textContent,this._isNumbers=this._numsCheckBox.checked,this._isSound=this._soundCheckBox.checked,this._isMusic=this._musicCheckBox.checked,this.hide(),this._calback(this._selectedSize,this._isSound,this._isMusic,this._isNumbers))}))}dropdownListTogle(){this._isSizeButtonOn=!this._isSizeButtonOn,this._isSizeButtonOn?this._dropdownContent.classList.add("dropdown-content-active"):this._dropdownContent.classList.remove("dropdown-content-active")}appendTo(t){t.appendChild(this._HTML)}show(){this._numsCheckBox.checked=this._isNumbers,this._musicCheckBox.checked=this._isMusic,this._soundCheckBox.checked=this._isSound,this._sizeButton.textContent=this._size,this._HTML.style.display="flex",setTimeout((()=>{this._HTML.classList.add("menu__window-active"),this._blockScreen.classList.add("block_screen-active")}),300)}hide(){this._HTML.classList.remove("menu__window-active"),this._blockScreen.classList.remove("block_screen-active"),setTimeout((()=>{this._HTML.style.display="none"}),500)}}class p{constructor(){this._HTML=document.createElement("div"),this._HTML.classList.add("board")}appendTo(t){t.appendChild(this._HTML)}removeChild(t){this._HTML.removeChild(t)}appendChild(t){/^HTML\w+Element$/.test(t.constructor.name)?this._HTML.appendChild(t):t.appendTo(this._HTML)}setGrid(t){this._HTML.style.gridTemplateColumns="auto ".repeat(t),this._HTML.style.gridTemplateRows="auto ".repeat(t)}getSize(){return this._HTML.getBoundingClientRect().width}getPosition(){const{x:t}=this._HTML.getBoundingClientRect(),{y:e}=this._HTML.getBoundingClientRect();return{x:t,y:e}}}class _{static createSequence(t){return Array.from({length:t},((e,i)=>(i+1)%t))}static shuffle(t){let e=t.length-1;for(;e>1;){const i=~~(Math.random()*e);e-=1,[t[e],t[i]]=[t[i],t[e]]}}static convertTo2D(t,e){const i=[];return t.forEach(((t,s)=>{const[n,o]=_.getIndex2D(s,e);0===o&&(i[n]=[]),i[n].push(t)})),i}static getIndex2D(t,e){return[~~(t/e),t%e]}static isDefaultSequence(t){if(0!==t[t.length-1])return!1;for(let e=t.length-2;e>=0;e--)if(t[e]!==e+1)return!1;return!0}static convertToObject2D(t,e){const i={};return t.forEach(((t,s)=>{const[n,o]=_.getIndex2D(s,e);i[t]={row:n,column:o}})),i}static convertObj2dToArr(t,e){const i=[];for(let s=0;s<e;s++)for(let n=0;n<e;n++)for(const e in t)t[e].row===s&&t[e].column===n&&i.push(Number(e));return i}static isObjectsEqual(t,e){for(const[i,s]of Object.entries(t))if(void 0===s.column||void 0===e[i].column||void 0===s.row||void 0===e[i].row||s.column!==e[i].column||s.row!==e[i].row)return!1;return!0}}class u{constructor(t){this._HTML=document.createElement("div"),this._HTML.classList.add("tile"),this._Text=document.createElement("p"),this._Text.classList.add("tile_text"),this._HTML.appendChild(this._Text),this._number=t,this._isClickable=!0}appendTo(t){t.appendChild(this._HTML),this.setDefaultPosition(this.getPosition())}removeFrom(t){t.removeChild(this._HTML)}setClickable(t){this._isClickable=t}getClickable(){return this._isClickable}showNumber(t){this._Text.textContent=t?this._number:""}setPosition(t,e){this._shiftX=t,this._shiftY=e,this._HTML.style.transform=`translate(${t}px, ${e}px)`}getShift(){return{x:this._shiftX,y:this._shiftY}}setDefaultPosition(t){this._startX=t.x,this._startY=t.y}getDefaultPosition(){return{x:this._startX,y:this._startY}}getPosition(){const{x:t}=this._HTML.getBoundingClientRect(),{y:e}=this._HTML.getBoundingClientRect();return{x:t,y:e}}setImage(t,e){const[i,s]=_.getIndex2D(this._number-1,e);this._HTML.style.background=t,this._HTML.style.backgroundSize=e*this.getWidth()+"px",this._HTML.style.backgroundPosition=`${-this.getWidth()*s}px ${-this.getWidth()*i}px`}setZIndex(t){this._HTML.style.zIndex=t}getZIndex(){return this._HTML.style.zIndex||0}getNumber(){return this._number}getWidth(){return this._HTML.getBoundingClientRect().width}getRectPos(){return{x:this._HTML.getBoundingClientRect().x,y:this._HTML.getBoundingClientRect().y}}setMouseDown(t){this._HTML.onmousedown=t}updatePosition(t,e,i){const[s,n]=_.getIndex2D(this._number-1,e),o=(t.row-s)*(this.getWidth()+i),a=(t.column-n)*(this.getWidth()+i);this.setPosition(a,o)}disableTransition(){this._HTML.classList.add("disable_transition")}enableTransition(){this._HTML.classList.remove("disable_transition")}}class m{constructor(t,e){this._element=t,this._startPos={},this._startShift={},this._element.setMouseDown(m.mouseDown.bind(this)),this._callback=e}static mouseDown(t){t.preventDefault(),this._element.getClickable()&&(this._isDrag=!1,this._startZ=this._element.getZIndex(),this._element.setZIndex(5e3),this._startPos.x=t.clientX,this._startPos.y=t.clientY,this._startShift.x=this._element.getShift().x,this._startShift.y=this._element.getShift().y,this._element.disableTransition(),document.onmouseup=m.mouseUp.bind(this),document.onmousemove=m.mouseMove.bind(this))}static mouseMove(t){if(t.preventDefault(),this._element.getClickable()){this._isDrag=!0;const e=t.clientX-this._startPos.x+this._startShift.x,i=t.clientY-this._startPos.y+this._startShift.y;this._element.setPosition(e,i)}}static mouseUp(){this._element.getClickable()&&(this._element.setZIndex(this._startZ),this._element.enableTransition(),document.onmouseup=null,document.onmousemove=null,this._callback(this._element,this._isDrag))}}class b{constructor(t){this._size=t,this.resetGame()}resetGame(){this._tiles=_.createSequence(this._size*this._size),this._tiles2d=_.convertToObject2D(this._tiles,this._size),this._goal2d=_.convertToObject2D(this._tiles,this._size)}startGame(){do{this._tiles=_.createSequence(this._size*this._size),_.shuffle(this._tiles)}while(!this.isSolvableArray());this._tiles2d=_.convertToObject2D(this._tiles,this._size),this._tiles=[]}setTiles2d(t){this._tiles2d=t}getTiles2d(){return this._tiles2d}getMove(t){if(this._tiles2d[t].column===this._tiles2d[0].column){const e=this._tiles2d[0].row-this._tiles2d[t].row;if(1===e||-1===e)return this._tiles2d[t].row+=e,this._tiles2d[0].row-=e,!0}if(this._tiles2d[t].row===this._tiles2d[0].row){const e=this._tiles2d[0].column-this._tiles2d[t].column;if(1===e||-1===e)return this._tiles2d[t].column+=e,this._tiles2d[0].column-=e,!0}return!1}isSolved(){return _.isObjectsEqual(this._goal2d,this._tiles2d)}isSolvableArray(){let t=0;for(let e=0;e<this._tiles.length-1;e++)for(let i=0;i<e;i++)this._tiles[i]>this._tiles[e]&&(t+=1);return t%2==0}}class g{constructor(t,e){this.array=[...t],this.size=e,this.direction=["RIGHT","LEFT","DOWN","UP"],this.ans=[],this.result="",this.solve()}getDistance(t,e){return Math.abs(~~((this.array[t*this.size+e]-1)/this.size)-t)+Math.abs((this.array[t*this.size+e]-1)%this.size-e)}getDFS(t,e,i,s,n){if(t+e>n)return 0;if(!e){for(let e=0;e<t;++e)this.result+=this.direction[this.ans[e]]+" ";return 1}const o=[0,0,1,-1],a=[1,-1,0,0];for(let r,d,l=0;l<this.size;++l)if(r=i+o[l],d=s+a[l],Math.min(r,d)>=0&&Math.max(r,d)<this.size&&(!t||l!==(1^this.ans[t-1]))){this.ans[t]=l;const o=this.getDistance(r,d),a=i*this.size+s,h=r*this.size+d;if([this.array[a],this.array[h]]=[this.array[h],this.array[a]],this.getDFS(t+1,e-o+this.getDistance(i,s),r,d,n))return 1;[this.array[a],this.array[h]]=[this.array[h],this.array[a]]}return 0}getSolve(){return this.result}solve(){let t,e,i=0,s=0;for(let n=0;n<this.array.length;n++){const o=~~(n/this.size),a=n%this.size;if(this.array[n]){i+=this.getDistance(o,a);for(let t=o<<2|a,e=0;e<t;++e)s+=this.array[e]>this.array[n]}else t=o,e=a}if(s+t&1)for(let s=i;!this.getDFS(0,i,t,e,s);)s+=1;else this.result=null}}const x=new class{constructor(t){this._size=t,this._tiles=[];const e=1+~~(5*Math.random());this._srcImg=`url('../assets/card-${e}.jpg')`,this._moveSound=new Audio("../assets/move.wav"),this._music=new Audio("../assets/music.ogg"),this._music.loop=!0,this._isSound=!0,this._isMusic=!0,this._isNumbers=!0,this._isWon=!0,this._container=document.createElement("div"),this._container.classList.add("container"),this._board=new p,this._board.setGrid(t),this._dialogBox=new d,this._info=document.createElement("div"),this._info.classList.add("info__block"),this._timer=new l,this._timer.appendTo(this._info),this._moveCounter=new h,this._moveCounter.appendTo(this._info),this._ratingTable=new r(t),this._ratingTable.appendTo(this._info),this._menu=new c(this.setParams.bind(this)),this._menu.appendTo(document.body),this._controlPanel=document.createElement("div"),this._controlPanel.classList.add("control__panel"),this._startButton=document.createElement("button"),this._startButton.classList.add("start__button"),this._startButton.textContent="start",this._menuButton=document.createElement("button"),this._menuButton.classList.add("menu__button"),this._menuButton.textContent="M",this._solveButton=document.createElement("button"),this._solveButton.classList.add("solve__button"),this._solveButton.textContent="solve",this._board.appendTo(this._container),this._container.appendChild(this._info),this._controlPanel.appendChild(this._startButton),this._controlPanel.appendChild(this._menuButton),this._controlPanel.appendChild(this._solveButton),this._dialogBox.appendTo(document.body),this._info.appendChild(this._controlPanel),this.addListeners(),this.disableSolveButton(!0)}addListeners(){this._startButton.addEventListener("click",(()=>{this.removeSavedGame(),this._gemPuzzle.startGame(),this._tiles2d=this._gemPuzzle.getTiles2d(),this.updateTilesPosition(),this._moveCounter.reset(),this._timer.startTimer(),this._isWon=!1,this._isMusic&&this._music.play(),4===this._size&&this.disableSolveButton(!1)})),this._menuButton.addEventListener("click",(()=>{this._timer.stopTimer(),this._menu.show()})),this._solveButton.addEventListener("click",(()=>{this._timer.stopTimer(),this.disableSolveButton(!0),this.disableStartButton(!0),this._dialogBox.setWidth(20),this._dialogBox.setHeight(10),this._dialogBox.setText("Solving puzzle..."),this._dialogBox.setHasButton(!1),this._dialogBox.setHasInput(!1),this._dialogBox.show(),this._tiles.forEach((t=>t.setClickable(!1))),this._isWon=!0,this.removeSavedGame(),setTimeout(this.solveGame.bind(this),1e3)}))}createTiles(){for(let t=0;t<this._size*this._size-1;t++){const e=new u(t+1);e.appendTo(this._board),e.setImage(this._srcImg,this._size),e.showNumber(this._isNumbers),new m(e,this.checkTilePosition.bind(this)),this._tiles.push(e),e.setPosition(0,0)}}checkTilePosition(t,e){!this._isWon&&(e&&this.intersect(t)||!e)&&this._gemPuzzle.getMove(t.getNumber())&&(this._isSound&&this._moveSound.play(),this._tiles2d=this._gemPuzzle.getTiles2d(),this._moveCounter.addMove(),this._gemPuzzle.isSolved()&&(this._isWon=!0,this.showWonWindow())),this._isWon?this.removeSavedGame():this.saveGame(),this.updateTilePos(t.getNumber())}updateTilesPosition(){for(let t=0;t<this._tiles.length;t++)this.updateTilePos(t+1)}updateTilePos(t){const e=this._tiles2d[t],i=this._board.getSize()/100;this._tiles[t-1].updatePosition(e,this._size,i)}updateTilesSize(){for(let t=0;t<this._tiles.length;t++)this._tiles[t].disableTransition(),this._tiles[t].setImage(this._srcImg,this._size),this.updateTilesPosition(),this._tiles[t].enableTransition()}appendTo(t){t.appendChild(this._container)}showWonWindow(){const t=this._timer.getTime();this._timer.stopTimer();const e=this._moveCounter.getMoves(),i=a.getTimeFormat(t);let s=`<h2>Win!</h2><p>The puzzle was solved in</p><p><strong>${i.hrs} hrs ${i.mins} mins ${i.secs} secs</strong></p><p>and</p><p><strong>${e} moves</strong></p><br>`,n=!1;this._ratingTable.isBestTime(t)&&(s+="<p>You're in the top ten by time!</p>",n=!0),this._ratingTable.isBestMoves(e)&&(s+="<p>You're in the top ten by moves!</p>",n=!0),this._dialogBox.setWidth(25),this._dialogBox.setHeight(45),this._dialogBox.setText(s),n&&(this._dialogBox.setHasInput(!0),this._dialogBox.setCallback(this.saveBestResult.bind(this))),this._dialogBox.setHasButton(!0),this._dialogBox.show()}saveBestResult(t){const e=this._timer.getTime(),i=this._moveCounter.getMoves(),s=`${this._size}x${this._size}`;o.postRecord(t,s,e,i,this.updateRatingList.bind(this))}showSolveWindow(){this._dialogBox.setWidth(20),this._dialogBox.setHeight(10),this._dialogBox.setText("Solving puzzle..."),this._dialogBox.setHasButton(!1),this._dialogBox.setHasInput(!1),this._dialogBox.show()}intersect(t){const e=this._tiles2d[0],i=this._board.getSize()/100,s=e.column*(t.getWidth()+i)+this._board.getPosition().x,n=e.row*(t.getWidth()+i)+this._board.getPosition().y,o=s+t.getWidth(),a=n+t.getWidth(),r=t.getRectPos().x,d=t.getRectPos().y,l=r+t.getWidth(),h=d+t.getWidth();return r<o&&l>s&&h>n&&d<a}updateRatingList(){this._ratingTable.loadRating()}loadGame(t){if(t){const t=JSON.parse(localStorage.getItem(`${this._size}x${this._size}`));this._gemPuzzle.setTiles2d(t.state),this._tiles2d=t.state,this._srcImg=t.img,this._tiles.forEach((t=>t.removeFrom(this._board))),this._tiles=[],this._board.setGrid(this._size),this._isWon=!1,this.createTiles(),this.updateTilesSize(),this.updateTilesPosition(),this._moveCounter.setMoves(t.moves),this._timer.setStartTime(t.time),this.disableSolveButton(!1)}else this.removeSavedGame()}saveGame(){const t={state:this._tiles2d,moves:this._moveCounter.getMoves(),time:this._timer.getTime(),img:this._srcImg},e=JSON.stringify(t);localStorage.setItem(`${this._size}x${this._size}`,e)}removeSavedGame(){localStorage.removeItem(`${this._size}x${this._size}`)}newGame(){this._gemPuzzle=new b(this._size),this._tiles2d=this._gemPuzzle.getTiles2d(),this._tiles.forEach((t=>t.removeFrom(this._board))),this._tiles=[],this._board.setGrid(this._size),this._isWon=!0,this._solve=null,this.disableStartButton(!1),this.createTiles(),this.updateTilesSize(),this.updateTilesPosition(),"undefined"!=typeof Storage?localStorage.getItem(`${this._size}x${this._size}`)&&(this._dialogBox.setText("<p>The last game has not been completed.</p><p>Do you want to continue?</p>"),this._dialogBox.setCancelable(!0),this._dialogBox.setWidth(25),this._dialogBox.setHeight(20),this._dialogBox.setCallback(this.loadGame.bind(this)),this._dialogBox.show()):n.localStorageSupport()}solveGame(){const t=_.convertObj2dToArr(this._tiles2d,this._size),e=new g(t,this._size).getSolve();this._solve=e.split(" "),this._solve.pop(),this._dialogBox.hide(),this.stepByStep(0)}setParams(t,e,i,s){0===t?this._isWon||this._timer.resumeTimer():(this._isMusic=i,this._isSound=e,this._isNumbers=s,this._isMusic?this._music.play():(this._music.pause(),this._music.currentTime=0),this._tiles.forEach((t=>t.showNumber(this._isNumbers))),this._size!==t&&void 0!==t?(this._size=t,this._ratingTable.setSize(t),this._ratingTable.loadRating(),this.newGame()):this._isWon||this._timer.resumeTimer())}disableSolveButton(t){this._solveButton.disabled=t,t?this._solveButton.classList.add("main_menu-button_disable"):this._solveButton.classList.remove("main_menu-button_disable")}disableStartButton(t){this._startButton.disabled=t,t?this._startButton.classList.add("main_menu-button_disable"):this._startButton.classList.remove("main_menu-button_disable")}stepByStep(t){switch(this._solve[t]){case"LEFT":for(const t in this._tiles2d)if(this._tiles2d[t].row===this._tiles2d[0].row&&this._tiles2d[t].column===this._tiles2d[0].column-1){this._tiles2d[t].column=this._tiles2d[0].column,this._tiles2d[0].column=this._tiles2d[t].column-1;break}break;case"RIGHT":for(const t in this._tiles2d)if(this._tiles2d[t].row===this._tiles2d[0].row&&this._tiles2d[t].column===this._tiles2d[0].column+1){this._tiles2d[t].column=this._tiles2d[0].column,this._tiles2d[0].column=this._tiles2d[t].column+1;break}break;case"UP":for(const t in this._tiles2d)if(this._tiles2d[t].row===this._tiles2d[0].row-1&&this._tiles2d[t].column===this._tiles2d[0].column){this._tiles2d[t].row=this._tiles2d[0].row,this._tiles2d[0].row=this._tiles2d[t].row-1;break}break;case"DOWN":for(const t in this._tiles2d)if(this._tiles2d[t].row===this._tiles2d[0].row+1&&this._tiles2d[t].column===this._tiles2d[0].column){this._tiles2d[t].row=this._tiles2d[0].row,this._tiles2d[0].row=this._tiles2d[t].row+1;break}}this.updateTilesPosition(),setTimeout((()=>{t<this._solve.length?this.stepByStep(t+1):this.endStepByStep()}),1e3)}endStepByStep(){this.disableStartButton(!1),this._tiles.forEach((t=>t.setClickable(!0)))}}(4);x.appendTo(document.body),x.newGame(),window.addEventListener("resize",(()=>{x.updateTilesSize()}))})()})();